# CLAUDE.md

Этот файл содержит руководство для Claude Code (claude.ai/code) при работе с кодом в этом репозитории.

## Команды разработки

### Основные команды

- `npm i` - установка зависимостей
- `npm run dev` - Запустить dev-сервер с горячей перезагрузкой
- `npm run build` - Собрать проект для продакшена (TypeScript компиляция + Vite сборка)
- `npm run lint` - Проверить код с помощью ESLint
- `npm run preview` - Запустить preview сервер для проверки production сборки

### Важные примечания по командам

- Всегда запускайте `npm run lint` после внесения изменений в код
- Используйте `npm run build` для проверки корректности TypeScript типов перед коммитом

## Архитектура проекта

### Общая структура

Это React SPA приложение для генерации юридических документов, построенное на:

- **Frontend**: React 19 + TypeScript + Vite
- **Стилизация**: CSS/SCSS модули + обычные CSS файлы
- **API**: Внешний бэкенд API через прокси (см. vite.config.ts)

### Структура компонентов

```
src/
├── components/          # Все React компоненты
│   ├── Header/         # Хедер с авторизацией
│   ├── Generation/     # Основной компонент генерации документов
│   ├── AuthModal/      # Модальные окна авторизации
│   ├── Sidebar/        # Боковая панель для авторизованных пользователей
│   └── ...
├── utils/              # Утилиты (API, хелперы)
└── assets/             # Статические ресурсы
```

### Ключевые особенности архитектуры

#### Система состояний

- **Локальное состояние**: useState для компонентов
- **Авторизация**: localStorage + JWT токены
- **API взаимодействие**: Кастомные хуки (useDocumentGeneration, useAuth)

#### Компонент Generation

Центральный компонент приложения с многошаговым процессом:

1. Ввод запроса пользователем
2. Подтверждение типа документа
3. Заполнение формы с данными
4. Финальный результат с загрузкой документа

#### API интеграция

- Базовый URL настраивается через `getApiBaseUrl()` в `src/utils/api.ts`
- В dev режиме используется прокси `/api` → `http://api.neuroyurist.ru:8000`
- В продакшене используется `/api/proxy?path=`
- JWT токены автоматически добавляются в заголовки запросов

#### Компонентная архитектура

- Каждый компонент имеет свою папку с index.ts для экспорта
- CSS/SCSS файлы находятся рядом с компонентами
- Хуки выносятся в отдельные файлы в папке `hooks/`

### Конфигурация разработки

- **TypeScript**: Строгая типизация, конфигурация в tsconfig.json
- **ESLint**: Конфигурация в eslint.config.js
- **Vite**: Конфигурация с прокси для API в vite.config.ts
- **Sass**: Поддержка .scss файлов

### Deployment

- Приложение деплоится на Vercel (см. vercel.json)
- API запросы проксируются через serverless функции Vercel
